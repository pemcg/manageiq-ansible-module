---
driver:
  name: openstack
  openstack_username: '<%= ENV["OS_USERNAME"] %>'
  openstack_api_key: '<%= ENV["OS_PASSWORD"] %>'
  openstack_auth_url: '<%= ENV["OS_AUTH_URL"] %>'
  openstack_tenant: '<%= ENV["OS_PROJECT"] %>'
  floating_ip_pool: '<%= ENV["OS_FIP_POOL"] %>'
  allocate_floating_ip: true
  disable_ssl_validation: true
  server_name_prefix: '<%= ENV["PREFIX"] %>'

provisioner:
  name: ansible_push
  chef_bootstrap_url: nil
  ansible_config: "test/ansible.cfg"
  idempotency_test: false
  diff: true
  verbose: 'vv'

transport:
  username: root
  password: smartvm

platforms:
  - name: cfme-5.9
    driver:
      image_ref: cfme-rhos-5.9.0.20-1
      flavor_ref: m1.medium
verifier:
  name: inspec

suites:
  - name: database-present
    provisioner:
      playbook: "test/integration/database/ansible/present.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-01

  - name: database-absent
    provisioner:
      playbook: "test/integration/database/ansible/absent.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-02

  - name: database-backup
    provisioner:
      playbook: "test/integration/database/ansible/backup.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-03

  - name: database-restore
    provisioner:
      playbook: "test/integration/database/ansible/restore.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-05

  - name: database-reset
    provisioner:
      playbook: "test/integration/database/ansible/reset.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-04

  - name: database-standalone
    provisioner:
      playbook: "test/integration/database/ansible/standalone.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-01

  - name: database-replicate
    provisioner:
      playbook: "test/integration/database/ansible/replicate.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-01
        - database-06

  - name: database-failover
    provisioner:
      playbook: "test/integration/database/ansible/failover.yml"
    verifier:
      inspec_tests:
        - path: test/integration/database
      controls:
        - database-06

  - name: key-create
    provisioner:
      playbook: "test/integration/key/ansible/create.yml"
    verifier:
      inspec_tests:
        - path: test/integration/key
      controls:
        - key-01


# TODO:
# - name: key-import

